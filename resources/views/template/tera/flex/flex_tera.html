{% macro calculate_flex_basis(content_count, loop_index, max_horizontal) -%}

{% set remaining_count = content_count - loop_index + 1 %}


{% if remaining_count < max_horizontal %}
    {% set flex_basis = 100/ (max_horizontal - 1)  - 1  %}

{% else %}
    {% set flex_basis = 100 / max_horizontal - 1 %}

{% endif %}

{{ flex_basis }}

{%- endmacro calculate_flex_basis %}
